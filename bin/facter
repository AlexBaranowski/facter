#!/usr/bin/env ruby
# frozen_string_literal: true

require 'bundler/setup'
require 'open3'
require 'json'
require_relative '../config/config'
require_relative '../lib/cli'
require_relative '../lib/base'
require_relative '../lib/fact_loader'
require_relative '../lib/query_parser'
require_relative '../lib/models/loaded_fact'
require_relative '../lib/models/fact_collection'
require_relative '../lib/models/fact'
require_relative '../lib/fact_formater'

os = :linux
require_relative "../lib/facts/#{os}/network_interface"
require_relative "../lib/facts/#{os}/network_ip"
require_relative "../lib/facts/#{os}/os/name"
require_relative "../lib/facts/#{os}/os/family"
require_relative "../lib/facts/#{os}/os/release"
require_relative '../lib/resolvers/base_resolver'
require_relative "../lib/resolvers/#{os}/os_resolver"

ARGV.unshift(Facter::Cli.default_task) unless
  Facter::Cli.all_tasks.key?(ARGV[0]) ||
  Facter::Cli.instance_variable_get(:@map).key?(ARGV[0])

Facter::Cli.start(ARGV)
